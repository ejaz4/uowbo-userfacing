model LinkedAccounts {
  id String @id @default(uuid())

  studentProfile   StudentProfile @relation(fields: [studentProfileId], references: [id])
  studentProfileId String         @unique

  discord DiscordAccountLink?
}

model DiscordAccountLink {
  id        String  @id
  username  String  @unique
  avatarUrl String?

  linkedAccounts   LinkedAccounts? @relation(fields: [linkedAccountsId], references: [id])
  linkedAccountsId String?         @unique

  sessions DiscordSession[]

  guilds DiscordGuildMember[]
}

model DiscordSession {
  id String @id @default(uuid())

  token String @unique

  escalationSecret String

  isAuthenticated Boolean @default(false)
  isRevoked       Boolean @default(false)

  discordAccountLink   DiscordAccountLink? @relation(fields: [discordAccountLinkId], references: [id])
  discordAccountLinkId String?
}
